–ò–Ω–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞–∫—É—é-–ª–∏–±–æ –∑–∞–¥–∞—á—É —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–µ `X` *—Å–µ–∫—É–Ω–¥/–º–∏–Ω—É—Ç/—á–∞—Å–æ–≤* —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å —É—Å–ª–æ–≤–∏—è.

–ß—Ç–æ–±—ã –Ω–µ –∑–∞–º–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è —Å —Ü–∏–∫–ª–æ–º –∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ –≤ –∫–æ–¥–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –º–æ–¥—É–ª—è `discord.ext.tasks`.

### –°–æ–∑–¥–∞–¥–∏–º –∑–∞–¥–∞—á—É, –∫–æ—Ç–æ—Ä–∞—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –≤—ã–≤–æ–¥–∏—Ç –≤ –∫–æ–Ω—Å–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º –∫–∞–Ω–∞–ª–µ.

–î–ª—è –Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏–º –º–æ–¥—É–ª—å:

```py
from discord.ext import tasks
```

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º–µ—Ç–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–∞–∫ –∑–∞–¥–∞—á—É –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º, –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º [`@tasks.loop()`][1]. –í –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- `seconds`: `int`/`float` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—É–Ω–¥, –º–µ–∂–¥—É –∏—Ç–µ—Ä–∞—Ü–∏—è–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
- `minutes`: `int`/`float` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω—É—Ç, –º–µ–∂–¥—É –∏—Ç–µ—Ä–∞—Ü–∏—è–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
- `hours`: `int`/`float` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤, –º–µ–∂–¥—É –∏—Ç–µ—Ä–∞—Ü–∏—è–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å:

- `time`: `datetime.time` ‚Äî —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á–∏
- `count`: `int` ‚Äî —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞—á—É 

–°–æ–∑–¥–∞–¥–∏–º —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–µ —É–∫–∞–∂–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ 10 —Å–µ–∫—É–Ω–¥:

```py
@tasks.loop(seconds=10)
async def my_loop():
    . . .
```

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –ª–æ–≥–∏–∫—É —Ñ—É–Ω–∫—Ü–∏–∏:

```py
@tasks.loop(seconds=10)
async def my_loop():
    # –±—É–¥–µ–º –≤—ã–≤–æ–¥–∏—Ç—å —É–∞—Å—Ç–Ω–∏–∫–æ–≤ –≤ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö
    # –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤, –≥–¥–µ –µ—Å—Ç—å –±–æ—Ç
    for guild in bot.guilds:
        # –≤—ã–≤–æ–¥–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
        print(guild.name, end='')
        #              –±–µ—Ä–µ–º –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–æ–ª—å–∫–æ —Ç–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö —Å–≤–æ–π—Å—Ç–≤–æ voice != None
        for member in (member for member in guild.members if member.voice):
            # –≤—ã–≤–æ–¥–∏–º –∏–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
            print(f'\t{member.name} ({member.voice.channel.name})')
```

–¢–µ–ø–µ—Ä—å, –∑–∞–¥–∞—á—É –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å. –ú–Ω–æ–≥–∏–µ –∑–∞–±—ã–≤–∞—é—Ç —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –∏ –ø–æ—Ç–æ–º –¥–æ–≤–æ–ª—å–Ω–æ —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤–æ–ø—Ä–æ—Å –æ —Ç–æ–º, –ø–æ—á–µ–º—É –∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ([**–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ø—Ä–æ–±–ª–µ–º—ã**][2])

–ó–∞–¥–∞—á—É –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –±–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –ê –¥–ª—è —ç—Ç–æ–≥–æ, –∫–∞–∫ –Ω–µ–ª—å–∑—è –ª—É—á—à–µ, –ø–æ–¥—Ö–æ–¥–∏—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è `on_ready()`. –ü–æ—á–∏—Ç–∞—Ç—å –ø—Ä–æ –Ω–µ–≥–æ –º–æ–∂–Ω–æ [**–∑–¥–µ—Å—å**][3].

```py
@bot.event
async def on_ready():
    my_loop.start()
```

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ [**—Ç–∞–∫–æ–π –∫–æ–¥**][4]. 

–ê –≤ –∫–æ–Ω—Å–æ–ª—å –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è:

```py
–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
        dennys (üîä –ù–∞–∑–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞)
```

[1]: https://discordpy.readthedocs.io/en/stable/ext/tasks/index.html?highlight=discord%20ext%20tasks#discord.ext.tasks.loop
[2]: https://github.com/denisnumb/discord-py-guide/blob/main/problems/task_loop_not_working.md
[3]: https://github.com/denisnumb/discord-py-guide/blob/main/discord-py.md#async-def-on_ready
[4]: https://github.com/denisnumb/discord-py-guide/blob/main/examples/tasks.py
